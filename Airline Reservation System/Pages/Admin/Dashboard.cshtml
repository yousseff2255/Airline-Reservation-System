@page
@model Airline_Reservation_System.Pages.Admin.DashboardModel
@{
    ViewData["name"] = "sidebar";
    ViewData["Title"] = "Dashboard";
    ViewData["Nav"] = HttpContext.Session.GetString("role").ToString();
    ViewData["Logged"] = Convert.ToString(HttpContext.Session.GetString("email"));
}


<script>

    const channel = @Html.Raw(Json.Serialize(Model.status));
    const Tickets = @Html.Raw(Json.Serialize(Model.Tickets));
    const Flights = @Html.Raw(Json.Serialize(Model.Flights));
    const flight_days = @Html.Raw(Json.Serialize(Model.flight_days));
    const labels = ['Delayed', 'Finished', 'Scheduled'];

</script>











<div class="header">
    <div class="menu-toggle-btn">
        <!-- Menu close button for mobile devices -->
        <a href="#">
            <i class="bi bi-list"></i>
        </a>
    </div>
    <!-- Logo -->
    <a href="./dashboard.html" class="logo">
        <img width="100" src="../logo.png" alt="logo">
    </a>
    <!-- ./ Logo -->
    <div class="page-title">Dashboard</div>
    @* <form class="search-form">
    <div class="input-group">
    <button class="btn btn-outline-light" type="button" id="button-addon1">
    <i class="bi bi-search"></i>
    </button>
    <input type="text" class="form-control" placeholder="Search..." style="width: 1%;"
    aria-label="Example text with button addon" aria-describedby="button-addon1">
    <a href="#" class="btn btn-outline-light close-header-search-bar">
    <i class="bi bi-x"></i>
    </a>
    </div>
    </form> *@
    <div class="header-bar ms-auto">
        <ul class="navbar-nav justify-content-end">
            @*         <li class="nav-item">
            <a href="#" class="nav-link nav-link-notify" data-count="2" data-sidebar-target="#notifications">
            <i class="bi bi-bell icon-lg"></i>
            </a>
            </li>
            <li class="nav-item dropdown">
            <a href="#" class="nav-link nav-link-notify" data-count="3" data-bs-toggle="dropdown">
            <i class="bi bi-cart2 icon-lg"></i>
            </a>
            <div class="dropdown-menu dropdown-menu-lg dropdown-menu-end p-0">
            <h6 class="m-0 px-4 py-3 border-bottom">Shopping Cart</h6>
            <div class="dropdown-menu-body">
            <div class="list-group list-group-flush">
            <div class="list-group-item d-flex align-items-center">
            <a href="#" class="text-danger me-3" title="Remove">
            <i class="bi bi-trash"></i>
            </a>
            <a href="#" class="me-3 flex-shrink-0 ">
            <img src="../images/products/3.jpg" class="rounded" width="60"
            alt="...">
            </a>
            <div>
            <h6>Digital clock</h6>
            <div>1 x $1.190,90</div>
            </div>
            </div>
            </div>
            <div class="list-group list-group-flush">
            <div class="list-group-item d-flex align-items-center">
            <a href="#" class="text-danger me-3" title="Remove">
            <i class="bi bi-trash"></i>
            </a>
            <a href="#" class="me-3 flex-shrink-0 ">
            <img src="../images/products/4.jpg" class="rounded" width="60"
            alt="...">
            </a>
            <div>
            <h6>Toy Car</h6>
            <div>1 x $139.58</div>
            </div>
            </div>
            </div>
            <div class="list-group list-group-flush">
            <div class="list-group-item d-flex align-items-center">
            <a href="#" class="text-danger me-3" title="Remove">
            <i class="bi bi-trash"></i>
            </a>
            <a href="#" class="me-3 flex-shrink-0 ">
            <img src="../images/products/5.jpg" class="rounded" width="60"
            alt="...">
            </a>
            <div>
            <h6>Sunglasses</h6>
            <div>2 x $50,90</div>
            </div>
            </div>
            </div>
            <div class="list-group list-group-flush">
            <div class="list-group-item d-flex align-items-center">
            <a href="#" class="text-danger me-3" title="Remove">
            <i class="bi bi-trash"></i>
            </a>
            <a href="#" class="me-3 flex-shrink-0 ">
            <img src="../images/products/6.jpg" class="rounded" width="60"
            alt="...">
            </a>
            <div>
            <h6>Cake</h6>
            <div>1 x $10,50</div>
            </div>
            </div>
            </div>
            </div>
            <h6 class="m-0 px-4 py-3 border-top small">
            Sub Total : <strong class="text-primary">$1.442,78</strong>
            </h6>
            </div>
            </li> *@
            <li class="nav-item ms-3">
                <form method="post">
                    <button type="submit" asp-page-handler="DownloadReport" class="btn btn-primary">Download Report</button>
                </form>
            </li>
        </ul>
    </div>
    <!-- Header mobile buttons -->
    <div class="header-mobile-buttons">
        <a href="#" class="search-bar-btn">
            <i class="bi bi-search"></i>
        </a>
        <a href="#" class="actions-btn">
            <i class="bi bi-three-dots"></i>
        </a>
    </div>
    <!-- ./ Header mobile buttons -->
</div>
<!-- ./ header -->

<div class="content ">

    <div class="row row-cols-1 row-cols-md-3 g-4">
        <div class="col-lg-7 col-md-12">
            <div class="card widget h-100">
                <div class="card-header d-flex">
                    <h6 class="card-title">
                        Flights Chart
                        <a href="#" class="bi bi-question-circle ms-1 small" data-bs-toggle="tooltip"
                           title="Annualy Flights and Tickets chart"></a>
                    </h6>
                    <div class="d-flex gap-3 align-items-center ms-auto">
                        <div class="dropdown">
                            <a href="#" data-bs-toggle="dropdown" class="btn btn-sm" aria-haspopup="true"
                               aria-expanded="false">
                                <i class="bi bi-three-dots"></i>
                            </a>
                            <div class="dropdown-menu dropdown-menu-end">
                                <a href="#" class="dropdown-item">View Detail</a>
                                <a href="#" class="dropdown-item">Download</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <div class="d-md-flex align-items-center mb-3">
                        <div class="d-flex align-items-center">
                            <div class="display-7 me-3" id="totalTickets">
                                <i class="bi bi-ticket me-2 text-success"></i>@Model.Tickets.Sum() tickets
                            </div>
                            <span class="text-success">
                                <i class="bi bi-arrow-up me-1 small"></i>8.30%
                            </span>
                        </div>
                        <div class="d-flex gap-4 align-items-center ms-auto mt-3 mt-lg-0">
                            <select class="form-select" id="yearDropdown">
                                <option value="2025">2025</option>
                                <option value="2024">2024</option>
                         
                                <option value="2023">2023</option>
                                <option value="2022">2022</option>


                            </select>
                        </div>
                    </div>
                    <div id="sales-chart"></div>
                    <div class="d-flex justify-content-center gap-4 align-items-center ms-auto mt-3 mt-lg-0">
                        <div>
                            <i class="bi bi-circle-fill mr-2 text-primary me-1 small"></i>
                            <span>Ticket Sold</span>
                        </div>
                        <div>
                            <i class="bi bi-circle-fill mr-2 text-success me-1 small"></i>
                            <span>Flight Depatures</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-5 col-md-12">
            <div class="card widget h-100">
                <div class="card-header d-flex">
                    <h6 class="card-title">
                        Flight's Status
                        <a href="#" class="bi bi-question-circle ms-1 small" data-bs-toggle="tooltip"
                           title="Flight's Status in Specific Year'"></a>
                    </h6>
                    <div class="d-flex gap-3 align-items-center ms-auto">
                        <div class="dropdown">
                            <a href="#" data-bs-toggle="dropdown" class="btn btn-sm" aria-haspopup="true"
                               aria-expanded="false">
                                <i class="bi bi-three-dots"></i>
                            </a>
                            <div class="dropdown-menu dropdown-menu-end">
                                <a href="#" class="dropdown-item">View Detail</a>
                                <a href="#" class="dropdown-item">Download</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-body">

                    <div id="sales-channels"></div>

                    <div class="row text-center mb-5 mt-4">
                        <div class="col-4">
                            <div class="display-7" id="DelayedStatus">@Model.status[0]</div>
                            <div class="text-success my-2 small">
                                <i class="bi bi-arrow-up me-1 small"></i>30.50%
                            </div>
                            <div class="d-flex align-items-center justify-content-center">
                                <i class="bi bi-circle-fill text-orange me-2 small"></i>
                                <span class="text-muted">Delayed</span>
                            </div>
                        </div>
                        <div class="col-4">
                            <div class="display-7" id="FinishedStatus">@Model.status[1]</div>
                            <div class="text-success my-2 small">
                                <i class="bi bi-arrow-up me-1 small"></i>1.80%
                            </div>
                            <div class="d-flex align-items-center justify-content-center">
                                <i class="bi bi-circle-fill text-cyan me-2 small"></i>
                                <span class="text-muted">Finished</span>
                            </div>

                        </div>
                        <div class="col-4">
                            <div class="display-7" id="ScheduledStatus">@Model.status[2]</div>
                            <div class="text-danger my-2 small">
                                <i class="bi bi-arrow-down me-1 small"></i>15.20%
                            </div>
                            <div class="d-flex align-items-center justify-content-center">
                                <i class="bi bi-circle-fill text-indigo me-2 small"></i>
                                <span class="text-muted">Scheduled</span>
                            </div>
                        </div>
                    </div>
                    @* <div class="text-center">
                    <button class="btn btn-outline-primary btn-icon">
                    <i class="bi bi-download"></i> Download Report
                    </button>
                    </div> *@
                </div>
            </div>
        </div>
        <div class="col-lg-4 col-md-12">
            <div class="card h-100">
                <div class="card-body">
                    <div class="d-flex mb-3">
                        <div class="display-7">
                            <i class="bi bi-airplane"></i>
                        </div>
                        <div class="dropdown ms-auto">
                            <a href="#" data-bs-toggle="dropdown" class="btn btn-sm" aria-haspopup="true"
                               aria-expanded="false">
                                <i class="bi bi-three-dots"></i>
                            </a>
                            <div class="dropdown-menu dropdown-menu-end">
                                <a href="#" class="dropdown-item">View Detail</a>
                                <a href="#" class="dropdown-item">Download</a>
                            </div>
                        </div>
                    </div>
                    <h4 class="mb-3">Flights</h4>
                    <div class="d-flex mb-3">
                        <div class="display-7" id="totalFlights">@Model.Flights.Sum()</div>
                        <div class="ms-auto" id="total-orders"></div>
                    </div>
                    <div class="text-success">
                        Over last month 1.4% <i class="small bi bi-arrow-up"></i>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-4 col-md-12">
            <div class="card h-100">
                <div class="card-body">
                    <div class="d-flex mb-3">
                        <div class="display-7">
                            <i class="bi bi-ticket"></i>
                        </div>
                        <div class="dropdown ms-auto">
                            <a href="#" data-bs-toggle="dropdown" class="btn btn-sm" aria-haspopup="true"
                               aria-expanded="false">
                                <i class="bi bi-three-dots"></i>
                            </a>
                            <div class="dropdown-menu dropdown-menu-end">
                                <a href="#" class="dropdown-item">View Detail</a>
                                <a href="#" class="dropdown-item">Download</a>
                            </div>
                        </div>
                    </div>
                    <h4 class="mb-3">Ticket Sold</h4>
                    <div class="d-flex mb-3">
                        <div class="display-7">$@((int)@Model.total_revenues)</div>
                        <div class="ms-auto" id="total-sales"></div>
                    </div>
                    <div class="text-danger">
                        Over last month 2.4% <i class="small bi bi-arrow-down"></i>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-4 col-md-12">
            <div class="card h-100">
                <div class="card-body">
                    <div class="d-flex align-items-center mb-4">
                        <h6 class="card-title">Recent Reviews</h6>
                        @* <div class="dropdown ms-auto">
                        <a href="#">View All</a>
                        </div> *@
                    </div>
                    <div class="summary-cards">
                        @for (int i = 0; i < Model.Rev.Rows.Count; i++)
                        {
                            <div>
                                <div class="d-flex align-items-center mb-3">
                                    <div class="avatar avatar-info m-4 ">
                                        <span class="avatar-text rounded-circle">@Model.Rev.Rows[i][0].ToString()[0]</span>
                                    </div>
                                    <div>

                                        <h5 class="mb-1">@Model.Rev.Rows[i][0]</h5>
                                        <ul class="list-inline ms-auto mb-0">
                                            @for (int j = 0; j < (int)Model.Rev.Rows[i][1]; j++)
                                            {
                                                <li class="list-inline-item mb-0">
                                                    <i class="bi bi-star-fill text-warning"></i>
                                                </li>
                                            }
                                            @for (int j = 0; j < (5 - (int)Model.Rev.Rows[i][1]); j++)
                                            {
                                                <li class="list-inline-item mb-0">
                                                    <i class="bi bi-star-fill text-muted"></i>
                                                </li>
                                            }
                                            <li class="list-inline-item mb-0">@Model.Rev.Rows[i][1]</li>
                                        </ul>
                                    </div>
                                </div>
                                <div>@Model.Rev.Rows[i][2]</div>
                            </div>
                        }
                    </div>
                </div>
            </div>
        </div>
        @*   <div class="col-lg-4 col-md-12">
        <div class="card h-100">
        <div class="card-body">
        <div class="d-flex mb-4">
        <h6 class="card-title mb-0">Customer Rating</h6>
        <div class="dropdown ms-auto">
        <a href="#" data-bs-toggle="dropdown" class="btn btn-sm" aria-haspopup="true"
        aria-expanded="false">
        <i class="bi bi-three-dots"></i>
        </a>
        <div class="dropdown-menu dropdown-menu-end">
        <a href="#" class="dropdown-item">View Detail</a>
        <a href="#" class="dropdown-item">Download</a>
        </div>
        </div>
        </div>
        <div class="text-center">
        <div class="display-6">3.0</div>
        <div class="d-flex justify-content-center gap-3 my-3">
        <i class="bi bi-star-fill icon-lg text-warning"></i>
        <i class="bi bi-star-fill icon-lg text-warning"></i>
        <i class="bi bi-star-fill icon-lg text-warning"></i>
        <i class="bi bi-star-fill icon-lg text-muted"></i>
        <i class="bi bi-star-fill icon-lg text-muted"></i>
        <span>(318)</span>
        </div>
        </div>
        <div class="text-muted d-flex align-items-center justify-content-center">
        <span class="text-success me-3 d-block">
        <i class="bi bi-arrow-up me-1 small"></i>+35
        </span> Point from last month
        </div>
        <div class="row my-4">
        <div class="col-md-6 m-auto">
        <div id="customer-rating"></div>
        </div>
        </div>
        <div class="text-center">
        <button class="btn btn-outline-primary btn-icon">
        <i class="bi bi-download"></i> Download Report
        </button>
        </div>
        </div>
        </div>
        </div> *@
        <div class="col-lg-12 col-md-6">
            <div class="card h-100 bg-purple" style="margin-left: 100px;
    margin-right: 100px;">
                <div class="card-body text-center">
                    <div class="text-white-50">
                        <div class="bi bi-airplane display-6 mb-3"></div>
                        <div class="display-8 mb-2">Flights / Day</div>
                        <br />
                    </div>
                    <div id="products-sold"></div>
                </div>
            </div>
        </div>
        @*  <div class="col-lg-4 col-md-6">
        <div class="card widget h-100">
        <div class="card-header d-flex justify-content-between align-items-center">
        <h5 class="card-title">
        Revenue by countries
        <a href="#" class="bi bi-question-circle ms-1 small" data-bs-toggle="tooltip"
        title="Sales performance revenue based by country"></a>
        </h5>
        <a href="#">View All</a>
        </div>
        <div class="card-body">
        <div class="list-group list-group-flush">
        <div class="list-group-item d-flex justify-content-between align-items-center px-0">
        <div class="d-flex flex-grow-1 align-items-center">
        <img width="45" class="me-3"
        src="../images/flags/united-states-of-america.svg" alt="...">
        <span>United States</span>
        </div>
        <span>$1.671,10</span>
        </div>
        <div class="list-group-item d-flex justify-content-between align-items-center px-0">
        <div class="d-flex flex-grow-1 align-items-center">
        <img width="45" class="me-3" src="../images/flags/venezuela.svg" alt="...">
        <span>Venezuela</span>
        </div>
        <span>$1.064,75</span>
        </div>
        <div class="list-group-item d-flex justify-content-between align-items-center px-0">
        <div class="d-flex flex-grow-1 align-items-center">
        <img width="45" class="me-3" src="../images/flags/salvador.svg" alt="...">
        <span>Salvador</span>
        </div>
        <span>$1.055,98</span>
        </div>
        <div class="list-group-item d-flex justify-content-between align-items-center px-0">
        <div class="d-flex flex-grow-1 align-items-center">
        <img width="45" class="me-3" src="../images/flags/russia.svg" alt="...">
        <span>Russia</span>
        </div>
        <span>$1.042,00</span>
        </div>
        </div>
        </div>
        </div>
        </div> *@
        <div class="col-lg-12 col-md-12">
            <div class="card widget">
                <div class="card-header">
                    <h5 class="card-title">Daily Summary</h5>
                </div>
                <div class="row g-4">
                    <div class="col-md-6">
                        <div class="card border-0">
                            <div class="card-body text-center">
                                <div class="display-5">
                                    <i class="bi bi-cash-stack text-secondary"></i>
                                </div>
                                <h5 class="my-3">Revenue</h5>
                                <div class="text-muted">@Model.Summary[1] $ </div>
                                <div class="progress mt-3" style="height: 5px">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card border-0">
                            <div class="card-body text-center">
                                <div class="display-5">
                                    <i class="bi bi-airplane text-warning"></i>
                                </div>
                                <h5 class="my-3">Flights Departed</h5>
                                <div class="text-muted">@Model.Summary[0]</div>
                                <div class="progress mt-3" style="height: 5px">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card border-0">
                            <div class="card-body text-center">
                                <div class="display-5">
                                    <i class="bi bi-bar-chart text-info"></i>
                                </div>
                                <h5 class="my-3">Reviews</h5>
                                <div class="text-muted">5</div>
                                <div class="progress mt-3" style="height: 5px">
                                    <div class="progress-bar bg-info" role="progressbar" style="width: 80%"
                                         aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card border-0">
                            <div class="card-body text-center">
                                <div class="display-5">
                                    <i class="bi bi-people text-success"></i>
                                </div>
                                <h5 class="my-3">Passanger on board</h5>
                                <div class="text-muted"> @Model.Summary[2]</div>
                                <div class="progress mt-3" style="height: 5px">
                                    <div class="progress-bar bg-success" role="progressbar" style="width: 55%"
                                         aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

</div>
<!-- ./ content -->


<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script> <!-- Ensure jQuery is loaded -->
<!-- JQuery -->
<script src="../libs/jquery-3.7.1.min.js"></script>

<!-- Nicescroll -->
<script src="../libs/nicescroll.js"></script>

<!-- Apex chart -->
<script src="../libs/charts/apex/apexcharts.min.js"></script>

<!-- Slick -->
<script src="../libs/slick/slick.min.js"></script>

<!-- Examples -->
<script src="../js/examples/dashboard.js"></script>


<!-- Main Javascript file -->
<script src="../js/app.js"></script>

<script src="~/my.js"> </script>


